(this["webpackJsonpflappy-bird"]=this["webpackJsonpflappy-bird"]||[]).push([[3],{33:function(t,e,n){t.exports={Scene:"Scene_Scene__5AIfT"}},34:function(t,e,n){t.exports=n.p+"static/media/bg.f97dc14b.png"},35:function(t,e,n){t.exports=n.p+"static/media/bird.cab12c37.png"},36:function(t,e,n){t.exports=n.p+"static/media/fg.6ecbd537.png"},37:function(t,e,n){t.exports=n.p+"static/media/pipeNorth.07cd2335.png"},38:function(t,e,n){t.exports=n.p+"static/media/pipeSouth.f7914292.png"},39:function(t,e,n){t.exports=n.p+"static/media/fly.115aeb7a.mp3"},40:function(t,e,n){t.exports=n.p+"static/media/score.30b534d8.mp3"},43:function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){return!e||"object"!==c(e)&&"function"!==typeof e?r(t):e}n.r(e),n.d(e,"default",(function(){return L}));var u=n(0),p=n.n(u),f=n(33),l=n.n(f),y=n(34),d=n.n(y),m=n(35),b=n.n(m),v=n(36),g=n.n(v),w=n(37),x=n.n(w),S=n(38),k=n.n(S),R=n(39),P=n.n(R),D=n(40),E=n.n(D),L=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(y,t);var e,n,c,u,f=(e=y,function(){var t,n=s(e);if(a()){var i=s(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return h(this,t)});function y(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(e=f.call(this,t)).canvasRef=p.a.createRef(),e.imgs=[d.a,b.a,g.a,x.a,k.a],e.sounds=[P.a,E.a],e.state={gap:80,gravity:1.7},e.keyDownPressHandler=e.keyDownPressHandler.bind(r(e)),e.startAnimationLoop=e.startAnimationLoop.bind(r(e)),e}return n=y,(c=[{key:"componentDidMount",value:function(){var t=this;this.initCtx(),this.setStarterVals();var e=this.initSceneObjs();Promise.all(e).then((function(){t.initSceneSounds(),t.startAnimationLoop(),window.addEventListener("keydown",t.keyDownPressHandler),t.canvasRef.current.addEventListener("touchstart",t.keyDownPressHandler)}))}},{key:"initCtx",value:function(){this.ctx=this.canvasRef.current.getContext("2d")}},{key:"setStarterVals",value:function(){this.bX=10,this.bY=150,this.scoreCount=0,this.pipe=[],this.pipe[0]={x:this.canvasRef.current.width,y:0}}},{key:"initSceneObjs",value:function(){var t=this,e=[];return this.imgs.forEach((function(n){var i=t.getName(n);t[i]=new Image,t[i].src=n,e.push(t[i]),t[i].onload=function(){return Promise.resolve()}})),e}},{key:"initSceneSounds",value:function(){var t=this;this.sounds.forEach((function(e){return t[t.getName(e)]=new Audio(e)}))}},{key:"getName",value:function(t){return t.split("/").pop().split(".").shift()}},{key:"keyDownPressHandler",value:function(){this.bY-=30,this.fly.play()}},{key:"startAnimationLoop",value:function(){this.ctx.drawImage(this.bg,0,0);for(var t=0;t<this.pipe.length;t++){var e=this.pipeNorth.height+this.state.gap;if(this.ctx.drawImage(this.pipeNorth,this.pipe[t].x,this.pipe[t].y),this.ctx.drawImage(this.pipeSouth,this.pipe[t].x,this.pipe[t].y+e),this.pipe[t].x--,125===this.pipe[t].x&&this.pipe.push({x:this.canvasRef.current.width,y:Math.floor(Math.random()*this.pipeNorth.height)-this.pipeNorth.height}),this.bX+this.bird.width>=this.pipe[t].x&&this.bX<=this.pipe[t].x+this.pipeNorth.width&&(this.bY<=this.pipe[t].y+this.pipeNorth.height||this.bY+this.bird.height>=this.pipe[t].y+e)||this.bY+this.bird.height>=this.canvasRef.current.height-this.fg.height)throw window.cancelAnimationFrame(this.requestID),this.setStarterVals(),this.startAnimationLoop(),"End of the game";5===this.pipe[t].x&&(this.scoreCount++,this.score.play())}this.ctx.drawImage(this.fg,0,this.canvasRef.current.height-this.fg.height),this.ctx.drawImage(this.bird,this.bX,this.bY),this.bY+=this.state.gravity,this.ctx.fillStyle="#000",this.ctx.font="16px Century Gothic",this.ctx.fillText("Score: ".concat(this.scoreCount),10,this.canvasRef.current.height-20),this.requestID=window.requestAnimationFrame(this.startAnimationLoop)}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"removeEventListeners",value:function(){window.removeEventListener("keydown",this.keyDownPressHandler),this.canvasRef.current.removeEventListener("touchstart",this.keyDownPressHandler),window.cancelAnimationFrame(this.requestID)}},{key:"render",value:function(){return p.a.createElement("canvas",{className:l.a.Scene,ref:this.canvasRef,width:"288",height:"512"})}}])&&i(n.prototype,c),u&&i(n,u),y}(u.Component)}}]);
//# sourceMappingURL=3.616990de.chunk.js.map